<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="/dist/favicon.ico">
    <link rel="apple-touch-icon" href="/dist/favicon.png">
    <link rel="stylesheet" type="text/css" href="/dist/highlight.css">
    <link rel="stylesheet" type="text/css" href="/dist/katex.min.css">
    <link rel="stylesheet" type="text/css" href="/dist/main.css">
    <title>Fio Examples | SF-Zhou's Blog</title>
  </head>
  <body>
    <div class="app">
      <div class="title">
        <h1> Fio Examples </h1>
      </div>
      <div class="info">
        <div class="date"> 2022.03.11 </div>
        <a href="https://github.com/SF-Zhou">
          <div class="author"> SF-Zhou </div>
        </a>
      </div>
      <div class="markdown">
        <h3 id="1.-write" tabindex="-1"><a href="#1.-write">1. Write</a></h3>
<p>Minimal exmaple:</p>
<pre class="language-bash"><code class="language-bash">fio --name<span class="token operator">=</span>test --rw<span class="token operator">=</span>write --size<span class="token operator">=</span>1M
<span class="token comment">#> test: (g=0): rw=write, bs=(R) 4096B-4096B, (W) 4096B-4096B, (T) 4096B-4096B, ioengine=psync, iodepth=1</span>
<span class="token comment">#> fio-3.16</span>
<span class="token comment">#> Starting 1 process</span>
<span class="token comment">#> test: Laying out IO file (1 file / 1MiB)</span>
<span class="token comment">#></span>
<span class="token comment">#> test: (groupid=0, jobs=1): err= 0: pid=2647: Tue Mar 15 14:45:39 2022</span>
<span class="token comment">#>   write: IOPS=85.3k, BW=333MiB/s (350MB/s)(1024KiB/3msec); 0 zone resets</span>
<span class="token comment">#>     clat (usec): min=6, max=211, avg= 7.98, stdev=12.93</span>
<span class="token comment">#>      lat (usec): min=6, max=212, avg= 8.05, stdev=13.00</span>
<span class="token comment">#>     clat percentiles (usec):</span>
<span class="token comment">#>      |  1.00th=[    7],  5.00th=[    7], 10.00th=[    7], 20.00th=[    7],</span>
<span class="token comment">#>      | 30.00th=[    7], 40.00th=[    7], 50.00th=[    7], 60.00th=[    7],</span>
<span class="token comment">#>      | 70.00th=[    7], 80.00th=[    7], 90.00th=[    8], 95.00th=[   14],</span>
<span class="token comment">#>      | 99.00th=[   21], 99.50th=[   23], 99.90th=[  212], 99.95th=[  212],</span>
<span class="token comment">#>      | 99.99th=[  212]</span>
<span class="token comment">#>   lat (usec)   : 10=93.75%, 20=5.47%, 50=0.39%, 250=0.39%</span>
<span class="token comment">#>   cpu          : usr=0.00%, sys=750.00%, ctx=0, majf=0, minf=30</span>
<span class="token comment">#>   IO depths    : 1=100.0%, 2=0.0%, 4=0.0%, 8=0.0%, 16=0.0%, 32=0.0%, >=64=0.0%</span>
<span class="token comment">#>      submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%</span>
<span class="token comment">#>      complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%</span>
<span class="token comment">#>      issued rwts: total=0,256,0,0 short=0,0,0,0 dropped=0,0,0,0</span>
<span class="token comment">#>      latency   : target=0, window=0, percentile=100.00%, depth=1</span>
<span class="token comment">#></span>
<span class="token comment">#> Run status group 0 (all jobs):</span>
<span class="token comment">#>   WRITE: bw=333MiB/s (350MB/s), 333MiB/s-333MiB/s (350MB/s-350MB/s), io=1024KiB (1049kB), run=3-3msec</span>

<span class="token function">ls</span> -l
<span class="token comment">#> total 1.0M</span>
<span class="token comment">#> -rw-r--r-- 1 zsf zsf 1.0M Mar 15 14:45 test.0.0</span>
</code></pre>
<p>Create multiple files:</p>
<pre class="language-bash"><code class="language-bash">fio --name<span class="token operator">=</span>test --group_reporting --directory<span class="token operator">=</span>/tmp/test --ioengine<span class="token operator">=</span>psync --rw<span class="token operator">=</span>write --direct<span class="token operator">=</span><span class="token number">1</span> --bs<span class="token operator">=</span>1M --size<span class="token operator">=</span>1G --numjobs<span class="token operator">=</span><span class="token number">8</span>
<span class="token comment">#> test: (g=0): rw=write, bs=(R) 1024KiB-1024KiB, (W) 1024KiB-1024KiB, (T) 1024KiB-1024KiB, ioengine=psync, iodepth=1</span>
<span class="token comment">#> ...</span>
<span class="token comment">#> fio-3.16</span>
<span class="token comment">#> Starting 8 processes</span>
<span class="token comment">#> test: Laying out IO file (1 file / 1024MiB)</span>
<span class="token comment">#> test: Laying out IO file (1 file / 1024MiB)</span>
<span class="token comment">#> test: Laying out IO file (1 file / 1024MiB)</span>
<span class="token comment">#> test: Laying out IO file (1 file / 1024MiB)</span>
<span class="token comment">#> test: Laying out IO file (1 file / 1024MiB)</span>
<span class="token comment">#> test: Laying out IO file (1 file / 1024MiB)</span>
<span class="token comment">#> test: Laying out IO file (1 file / 1024MiB)</span>
<span class="token comment">#> test: Laying out IO file (1 file / 1024MiB)</span>
<span class="token comment">#></span>
<span class="token comment">#> test: (groupid=0, jobs=8): err= 0: pid=3554: Tue Mar 15 14:57:10 2022</span>
<span class="token comment">#>   write: IOPS=1204, BW=1204MiB/s (1263MB/s)(8192MiB/6803msec); 0 zone resets</span>
<span class="token comment">#>     clat (usec): min=639, max=33284, avg=6602.69, stdev=2407.47</span>
<span class="token comment">#>      lat (usec): min=647, max=33310, avg=6629.95, stdev=2407.33</span>
<span class="token comment">#>     clat percentiles (usec):</span>
<span class="token comment">#>      |  1.00th=[ 1270],  5.00th=[ 1483], 10.00th=[ 1893], 20.00th=[ 5866],</span>
<span class="token comment">#>      | 30.00th=[ 6325], 40.00th=[ 6718], 50.00th=[ 7046], 60.00th=[ 7308],</span>
<span class="token comment">#>      | 70.00th=[ 7570], 80.00th=[ 7832], 90.00th=[ 8225], 95.00th=[ 8586],</span>
<span class="token comment">#>      | 99.00th=[10421], 99.50th=[14877], 99.90th=[26084], 99.95th=[27395],</span>
<span class="token comment">#>      | 99.99th=[33162]</span>
<span class="token comment">#>    bw (  MiB/s): min=  990, max= 2535, per=98.95%, avg=1191.57, stdev=49.14, samples=104</span>
<span class="token comment">#>    iops        : min=  986, max= 2530, avg=1186.85, stdev=49.11, samples=104</span>
<span class="token comment">#>   lat (usec)   : 750=0.28%, 1000=0.21%</span>
<span class="token comment">#>   lat (msec)   : 2=9.78%, 4=0.99%, 10=87.48%, 20=0.78%, 50=0.49%</span>
<span class="token comment">#>   cpu          : usr=0.45%, sys=9.97%, ctx=0, majf=0, minf=238</span>
<span class="token comment">#>   IO depths    : 1=100.0%, 2=0.0%, 4=0.0%, 8=0.0%, 16=0.0%, 32=0.0%, >=64=0.0%</span>
<span class="token comment">#>      submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%</span>
<span class="token comment">#>      complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%</span>
<span class="token comment">#>      issued rwts: total=0,8192,0,0 short=0,0,0,0 dropped=0,0,0,0</span>
<span class="token comment">#>      latency   : target=0, window=0, percentile=100.00%, depth=1</span>
<span class="token comment">#></span>
<span class="token comment">#> Run status group 0 (all jobs):</span>
<span class="token comment">#>   WRITE: bw=1204MiB/s (1263MB/s), 1204MiB/s-1204MiB/s (1263MB/s-1263MB/s), io=8192MiB (8590MB), run=6803-6803msec</span>

<span class="token function">ls</span> -l /tmp/test
<span class="token comment">#> total 8.0G</span>
<span class="token comment">#> -rw-r--r-- 1 zsf zsf 1.0G Mar 15 14:57 test.0.0</span>
<span class="token comment">#> -rw-r--r-- 1 zsf zsf 1.0G Mar 15 14:57 test.1.0</span>
<span class="token comment">#> -rw-r--r-- 1 zsf zsf 1.0G Mar 15 14:57 test.2.0</span>
<span class="token comment">#> -rw-r--r-- 1 zsf zsf 1.0G Mar 15 14:57 test.3.0</span>
<span class="token comment">#> -rw-r--r-- 1 zsf zsf 1.0G Mar 15 14:57 test.4.0</span>
<span class="token comment">#> -rw-r--r-- 1 zsf zsf 1.0G Mar 15 14:57 test.5.0</span>
<span class="token comment">#> -rw-r--r-- 1 zsf zsf 1.0G Mar 15 14:57 test.6.0</span>
<span class="token comment">#> -rw-r--r-- 1 zsf zsf 1.0G Mar 15 14:57 test.7.0</span>
</code></pre>
<p>Write for a while:</p>
<pre class="language-bash"><code class="language-bash">fio --name<span class="token operator">=</span>test --group_reporting --opendir<span class="token operator">=</span>/tmp/test --ioengine<span class="token operator">=</span>psync --rw<span class="token operator">=</span>write --direct<span class="token operator">=</span><span class="token number">1</span> --bs<span class="token operator">=</span>1M --runtime<span class="token operator">=</span><span class="token number">60</span> --numjobs<span class="token operator">=</span><span class="token number">8</span>
<span class="token comment">#> fio: opendir added 8 files</span>
<span class="token comment">#> test: (g=0): rw=write, bs=(R) 1024KiB-1024KiB, (W) 1024KiB-1024KiB, (T) 1024KiB-1024KiB, ioengine=psync, iodepth=1</span>
<span class="token comment">#> ...</span>
<span class="token comment">#> fio-3.16</span>
<span class="token comment">#> Starting 8 processes</span>
<span class="token comment">#></span>
<span class="token comment">#> test: (groupid=0, jobs=8): err= 0: pid=3696: Tue Mar 15 15:02:47 2022</span>
<span class="token comment">#>   write: IOPS=4517, BW=4518MiB/s (4737MB/s)(64.0GiB/14506msec); 0 zone resets</span>
<span class="token comment">#>     clat (usec): min=217, max=22752, avg=1715.98, stdev=1081.36</span>
<span class="token comment">#>      lat (usec): min=239, max=22775, avg=1749.85, stdev=1085.12</span>
<span class="token comment">#>     clat percentiles (usec):</span>
<span class="token comment">#>      |  1.00th=[  474],  5.00th=[  971], 10.00th=[ 1090], 20.00th=[ 1188],</span>
<span class="token comment">#>      | 30.00th=[ 1270], 40.00th=[ 1352], 50.00th=[ 1434], 60.00th=[ 1549],</span>
<span class="token comment">#>      | 70.00th=[ 1696], 80.00th=[ 1958], 90.00th=[ 2540], 95.00th=[ 3359],</span>
<span class="token comment">#>      | 99.00th=[ 6521], 99.50th=[ 8029], 99.90th=[12387], 99.95th=[14222],</span>
<span class="token comment">#>      | 99.99th=[19792]</span>
<span class="token comment">#>    bw (  MiB/s): min= 3380, max= 5836, per=98.18%, avg=4435.82, stdev=78.74, samples=225</span>
<span class="token comment">#>    iops        : min= 3376, max= 5833, avg=4431.92, stdev=78.70, samples=225</span>
<span class="token comment">#>   lat (usec)   : 250=0.01%, 500=1.20%, 750=1.34%, 1000=3.19%</span>
<span class="token comment">#>   lat (msec)   : 2=75.39%, 4=15.54%, 10=3.10%, 20=0.22%, 50=0.01%</span>
<span class="token comment">#>   cpu          : usr=2.06%, sys=64.11%, ctx=0, majf=0, minf=276</span>
<span class="token comment">#>   IO depths    : 1=100.0%, 2=0.0%, 4=0.0%, 8=0.0%, 16=0.0%, 32=0.0%, >=64=0.0%</span>
<span class="token comment">#>      submit    : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%</span>
<span class="token comment">#>      complete  : 0=0.0%, 4=100.0%, 8=0.0%, 16=0.0%, 32=0.0%, 64=0.0%, >=64=0.0%</span>
<span class="token comment">#>      issued rwts: total=0,65536,0,0 short=0,0,0,0 dropped=0,0,0,0</span>
<span class="token comment">#>      latency   : target=0, window=0, percentile=100.00%, depth=1</span>
<span class="token comment">#></span>
<span class="token comment">#> Run status group 0 (all jobs):</span>
<span class="token comment">#>   WRITE: bw=4518MiB/s (4737MB/s), 4518MiB/s-4518MiB/s (4737MB/s-4737MB/s), io=64.0GiB (68.7GB), run=14506-14506msec</span>
</code></pre>

      </div>
      
      <div class="footer">
        <div class="license">
          Except where otherwise noted, content on this site is licensed under a <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> license.
        </div>
        <div class="copyright">
          Copyright©2017 SF-Zhou, All Rights Reserved. Powered by <a href="https://pages.github.com/">GitHub Pages</a> and <a href="https://github.com/features/actions">GitHub Actions</a>.
        </div>
      </div>
    </div>
    <script src="/dist/main.js"></script>
    <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','https://www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-61723712-2', 'auto'); ga('send', 'pageview'); </script>
  </body>
</html>
