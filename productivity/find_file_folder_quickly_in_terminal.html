<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="/dist/favicon.ico">
    <link rel="apple-touch-icon" href="/dist/favicon.png">
    <link rel="stylesheet" type="text/css" href="/dist/highlight.css">
    <link rel="stylesheet" type="text/css" href="/dist/katex.min.css">
    <link rel="stylesheet" type="text/css" href="/dist/main.css">
    <title>终端下快速找文件、进目录 | SF-Zhou's Blog</title>
  </head>
  <body>
    <div class="app">
      <div class="title">
        <h1> 终端下快速找文件、进目录 </h1>
      </div>
      <div class="info">
        <div class="date"> 2015.02.26 </div>
        <a href="https://github.com/SF-Zhou">
          <div class="author"> SF-Zhou </div>
        </a>
      </div>
      <div class="markdown">
        <p>如果你经常是在终端下完成工作，那么必然会经常切换目录，或者查找一些文件。如果频繁地使用 cd 命令，无疑很浪费时间。</p>
<p>搜索这个问题，找到了一个非常好的开源工具：<a href="https://github.com/clvv/fasd">fasd</a>。</p>
<p>fasd 通过记录用户经常使用的目录，给每个目录分配一定的权重，频繁访问的目录权重越大。而当你使用 fasd 模糊查找一个目录时，它会查询符合条件的权重最大的目录。</p>
<h3 id="安装和配置" tabindex="-1"><a href="#%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AE">安装和配置</a></h3>
<p>Mac 下可以直接通过 Homebrew 安装：</p>
<pre class="language-shell"><code class="language-shell">brew <span class="token function">install</span> fasd
</code></pre>
<p>安装完成后可以按照官方的配置，在 bashrc/zshrc 里加入如下的代码：</p>
<pre class="language-shell"><code class="language-shell"><span class="token builtin class-name">alias</span> <span class="token assign-left variable">a</span><span class="token operator">=</span><span class="token string">'fasd -a'</span>        <span class="token comment"># any</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">s</span><span class="token operator">=</span><span class="token string">'fasd -si'</span>       <span class="token comment"># show / search / select</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">d</span><span class="token operator">=</span><span class="token string">'fasd -d'</span>        <span class="token comment"># directory</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">f</span><span class="token operator">=</span><span class="token string">'fasd -f'</span>        <span class="token comment"># file</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">sd</span><span class="token operator">=</span><span class="token string">'fasd -sid'</span>     <span class="token comment"># interactive directory selection</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">sf</span><span class="token operator">=</span><span class="token string">'fasd -sif'</span>     <span class="token comment"># interactive file selection</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">z</span><span class="token operator">=</span><span class="token string">'fasd_cd -d'</span>     <span class="token comment"># cd, same functionality as j in autojump</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">zz</span><span class="token operator">=</span><span class="token string">'fasd_cd -d -i'</span> <span class="token comment"># cd with interactive selection</span>
</code></pre>
<p>比如 Mac 的话，可以在 ~/.bash_profile 里加入上面的代码。</p>
<p>添加完成后，记得重启终端，或者执行：</p>
<pre class="language-shell"><code class="language-shell"><span class="token builtin class-name">source</span> ~/.bash_profile
</code></pre>
<h3 id="使用" tabindex="-1"><a href="#%E4%BD%BF%E7%94%A8">使用</a></h3>
<p>比如，我的博客代码在 ~/Work/sf-zhou.github.io/ 目录，我们可以这样训练 fasd：</p>
<pre class="language-shell"><code class="language-shell"><span class="token builtin class-name">cd</span> ~
<span class="token builtin class-name">cd</span> Work
<span class="token builtin class-name">cd</span> sf-zhou.github.io
</code></pre>
<p>以后，如果我们希望快速地跳到该目录，可以直接执行：</p>
<pre class="language-shell"><code class="language-shell">z sf-zhou
</code></pre>
<p>你也可以通过执行：</p>
<pre class="language-shell"><code class="language-shell">d sf-zhou
</code></pre>
<p>来查看与 sf-zhou 相关目录的权重。</p>
<p>我们可以将 fasd 和其他命令联合在一起使用：</p>
<pre class="language-shell"><code class="language-shell"><span class="token function">mv</span> <span class="token builtin class-name">.</span> <span class="token variable"><span class="token variable">`</span>d docu<span class="token variable">`</span></span>
</code></pre>
<p>上面的命令可以将当前文件夹所有的文件移动到 Documents 文件夹。终端里 `` 中的命令会先执行，并且将结果替换到原命令中。</p>
<p>我经常使用的命令还有：</p>
<pre class="language-shell"><code class="language-shell"><span class="token function">vim</span> <span class="token variable"><span class="token variable">`</span>f a.cpp<span class="token variable">`</span></span>
</code></pre>
<p>对于上面的操作，我们也可以这样：</p>
<pre class="language-shell"><code class="language-shell">f <span class="token parameter variable">-e</span> <span class="token function">vim</span> a.cpp
</code></pre>
<p>所以，我们可以把 <code>f -e vim</code> 加到 bashrc 文件里……</p>
<pre class="language-shell"><code class="language-shell"><span class="token builtin class-name">alias</span> <span class="token assign-left variable">v</span><span class="token operator">=</span><span class="token string">'f -e vim'</span> <span class="token comment"># quick opening files with vim</span>
</code></pre>
<h3 id="配合-zsh-&amp;-oh-my-zsh" tabindex="-1"><a href="#%E9%85%8D%E5%90%88-zsh-%26-oh-my-zsh">配合 Zsh &amp; oh-my-zsh</a></h3>
<p><a href="http://www.zsh.org/">Zsh</a>，这里的 z 表示终极。换句人话，只要你对效率有追求，最后总是会换到 Zsh 的（当然，现在选择更多了，比如 <a href="https://fishshell.com/">fish</a>）。</p>
<p><a href="http://ohmyz.sh/">oh-my-zsh</a>，简单的一句话，“Your terminal never felt this good before”。</p>
<p>配合 Zsh 和 oh-my-zsh，fasd 会更好用。</p>
<p>首先，安装 zsh：</p>
<pre class="language-shell"><code class="language-shell">brew <span class="token function">install</span> <span class="token function">zsh</span>
</code></pre>
<p>另外，建议安装 Zsh 的另一个工具是 zsh-syntax-highlighting，也可以通过 brew 安装。使用 brew search zsh，可以找到更多好用的工具。</p>
<p>安装 oh-my-zsh，在官网上找到安装命令：</p>
<pre class="language-shell"><code class="language-shell"><span class="token function">sh</span> <span class="token parameter variable">-c</span> <span class="token string">"<span class="token variable"><span class="token variable">$(</span><span class="token function">curl</span> <span class="token parameter variable">-fsSL</span> https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh<span class="token variable">)</span></span>"</span>
</code></pre>
<p>因为走 GitHub，所以连接不畅的，请注意科学上网。</p>
<p>全部安装好后，使用命令：</p>
<pre class="language-shell"><code class="language-shell">chsh <span class="token parameter variable">-s</span> /bin/zsh
</code></pre>
<p>将自己的默认终端切换为 Zsh。注意不加 sudo，执行该命令后会要求输入密码的。</p>
<p>OK，安装完 Zsh 和 oh-my-zsh 后终端就变得很好用了。可以再看看网上的一些配置，让自己的终端更好用。</p>
<p>配置 fasd。编辑 ~/.zshrc，加入：</p>
<pre class="language-shell"><code class="language-shell"><span class="token assign-left variable">fasd_cache</span><span class="token operator">=</span><span class="token string">"<span class="token environment constant">$HOME</span>/.fasd-init-bash"</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">command</span> <span class="token parameter variable">-v</span> fasd<span class="token variable">)</span></span>"</span> <span class="token parameter variable">-nt</span> <span class="token string">"<span class="token variable">$fasd_cache</span>"</span> <span class="token parameter variable">-o</span> <span class="token operator">!</span> <span class="token parameter variable">-s</span> <span class="token string">"<span class="token variable">$fasd_cache</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  fasd <span class="token parameter variable">--init</span> posix-alias bash-hook bash-ccomp bash-ccomp-install <span class="token operator">>|</span> <span class="token string">"<span class="token variable">$fasd_cache</span>"</span>
<span class="token keyword">fi</span>
<span class="token builtin class-name">source</span> <span class="token string">"<span class="token variable">$fasd_cache</span>"</span>
<span class="token builtin class-name">unset</span> fasd_cache
</code></pre>
<p>这几句脚本，首先会检查是否存在 fasd_cache 文件，没有的话就会使用命令创建，<code>fasd --init posix-alias bash-hook bash-ccomp bash-ccomp-install</code> 后面的参数就表示使用到的功能，默认其实也够了。如果存在就直接加载这个文件。然后，之前提过的功能还是都在的，另外多了一些更神奇的东西，例如：</p>
<pre class="language-shell"><code class="language-shell"><span class="token function">mv</span> d,box<span class="token punctuation">[</span>这里敲 Tab<span class="token punctuation">]</span>
</code></pre>
<p>会自动展开到：</p>
<pre class="language-shell"><code class="language-shell"><span class="token function">mv</span> /Users/sfzhou/Dropbox
</code></pre>
<p>继续敲这个命令，可以使用同样的方法。在输入过程中，<code>f,</code> 表示文件，<code>d,</code> 表示目录，Tab 展开，所见即所得。有多个候选的时候还可以按 Tab 选择：</p>
<figure tabindex="1"><a href="../images/8ff3f9e1b9f42f920aaffc76498c3716.png"><img src="../images/8ff3f9e1b9f42f920aaffc76498c3716.png" alt=""></a></figure>
<p>熟练使用，行云流水。</p>
<h3 id="end" tabindex="-1"><a href="#end">End</a></h3>
<p>总之，熟练使用该工具可以让你节约很多时间，享受美好的人生。</p>

      </div>
      <script src="https://giscus.app/client.js"
      data-repo="SF-Zhou/sf-zhou.github.io"
      data-repo-id="MDEwOlJlcG9zaXRvcnk4MDc5ODgwNg=="
      data-category="Announcements"
      data-category-id="DIC_kwDOBNDkVs4CA6GQ"
      data-mapping="title"
      data-reactions-enabled="0"
      data-emit-metadata="0"
      data-input-position="bottom"
      data-theme="preferred_color_scheme"
      data-lang="en"
      crossorigin="anonymous"
      async>
    </script>
      <div class="footer">
        <div class="license">
          Except where otherwise noted, content on this site is licensed under a <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> license.
        </div>
        <div class="copyright">
          Copyright©2017 SF-Zhou, All Rights Reserved. Powered by <a href="https://pages.github.com/">GitHub Pages</a> and <a href="https://github.com/features/actions">GitHub Actions</a>.
        </div>
      </div>
    </div>
    <script src="/dist/main.js"></script>
    <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','https://www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-61723712-2', 'auto'); ga('send', 'pageview'); </script>
  </body>
</html>
