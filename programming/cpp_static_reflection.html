<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="/dist/favicon.ico">
    <link rel="apple-touch-icon" href="/dist/favicon.png">
    <link rel="stylesheet" type="text/css" href="/dist/highlight.css">
    <link rel="stylesheet" type="text/css" href="/dist/katex.min.css">
    <link rel="stylesheet" type="text/css" href="/dist/main.css">
    <title>C++ 静态反射与序列化 | SF-Zhou's Blog</title>
  </head>
  <body>
    <div class="app">
      <div class="title">
        <h1> C++ 静态反射与序列化 </h1>
      </div>
      <div class="info">
        <div class="date"> 2022.11.16 </div>
        <a href="https://github.com/SF-Zhou">
          <div class="author"> SF-Zhou </div>
        </a>
      </div>
      <div class="markdown">
        <p>最近使用 FlatBuffers 作为 RPC 的序列化协议时，遇到一些问题：</p>
<ol>
<li>FlatBuffers 支持的数据类型是有限的，特定的数据类型需要在序列化/反序列化时手动进行转换；</li>
<li>FlatBuffers 代码生成的 TableType 并不易用，手动调用 Builder 进行构造容易出错；</li>
<li>FlatBuffers 代码生成的 NativeType 性能堪忧，使用该类型也会丧失无需反序列化的优势。</li>
</ol>
<p>仔细思考了下，当前的项目并不需要支持跨语言的 RPC 调用，只需要处理 C++ 中的序列化/反序列化；易用性反而是需求的重点，各类自定义的数据结构都希望可以方便的进行序列化/反序列化而不需要手动的进行转换。在参考了部分开源项目的思路后，决定抛弃 FlatBuffers、使用 C++ 原生数据结构 + 宏的方式定义类型 Schema、完成序列化/反序列化。</p>
<h3 id="1.-静态反射" tabindex="-1"><a href="#1.-%E9%9D%99%E6%80%81%E5%8F%8D%E5%B0%84">1. 静态反射</a></h3>
<p>静态反射的实现参考 <a href="https://github.com/garbageslam/visit_struct#intrusive-syntax">garbageslam/visit_struct</a> 项目中侵入式定义，它的核心原理是函数的可见范围，及派生类向基类的自动类型转换。举个例子（<a href="https://godbolt.org/z/sYdPd3P4e">在线执行</a>）：</p>
<pre class="language-cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string_view></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;tuple></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;variant></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;algorithm></span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token double-colon punctuation">::</span>string_view_literals<span class="token punctuation">;</span>

<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> Ts<span class="token operator">></span>
<span class="token keyword">struct</span> <span class="token class-name">TypeList</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">constexpr</span> <span class="token keyword">const</span> <span class="token keyword">unsigned</span> <span class="token keyword">int</span> size <span class="token operator">=</span> <span class="token keyword">sizeof</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">(</span>Ts<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">List</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">></span>
<span class="token keyword">struct</span> <span class="token class-name">Append</span><span class="token punctuation">;</span>

<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> Ts<span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">></span>
<span class="token keyword">struct</span> <span class="token class-name">Append</span><span class="token operator">&lt;</span>TypeList<span class="token operator">&lt;</span>Ts<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">></span><span class="token punctuation">,</span> T<span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">using</span> type <span class="token operator">=</span> TypeList<span class="token operator">&lt;</span>Ts<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> T<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">int</span> N<span class="token operator">></span>
<span class="token keyword">struct</span> <span class="token class-name">Rank</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token class-name">Rank</span><span class="token operator">&lt;</span><span class="token class-name">N</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token operator">></span></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token operator">></span>
<span class="token keyword">struct</span> <span class="token class-name">Rank</span><span class="token operator">&lt;</span><span class="token number">0</span><span class="token operator">></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">constexpr</span> <span class="token keyword">auto</span> kMaxRank <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>

<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">></span>
<span class="token keyword">struct</span> <span class="token class-name">Base</span> <span class="token punctuation">{</span>
  <span class="token keyword">using</span> Self <span class="token operator">=</span> T<span class="token punctuation">;</span>
  <span class="token keyword">static</span> <span class="token keyword">inline</span> TypeList<span class="token operator">&lt;</span><span class="token operator">></span> <span class="token function">CollectField</span><span class="token punctuation">(</span>Rank<span class="token operator">&lt;</span><span class="token number">0</span><span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">template</span> <span class="token operator">&lt;</span>size_t N<span class="token operator">></span>
<span class="token keyword">struct</span> <span class="token class-name">NameWrapper</span> <span class="token punctuation">{</span>
  <span class="token keyword">constexpr</span> <span class="token function">NameWrapper</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>str<span class="token punctuation">)</span><span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> std<span class="token double-colon punctuation">::</span><span class="token function">copy_n</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> N<span class="token punctuation">,</span> string<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token keyword">constexpr</span> <span class="token keyword">operator</span> std<span class="token double-colon punctuation">::</span><span class="token function">string_view</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token punctuation">{</span>string<span class="token punctuation">,</span> N <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token keyword">char</span> string<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">template</span> <span class="token operator">&lt;</span>NameWrapper Name<span class="token punctuation">,</span> <span class="token keyword">auto</span> Getter<span class="token punctuation">,</span> <span class="token keyword">auto</span> Checker<span class="token operator">></span>
<span class="token keyword">struct</span> <span class="token class-name">TypeHelper</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">constexpr</span> std<span class="token double-colon punctuation">::</span>string_view name <span class="token operator">=</span> Name<span class="token punctuation">;</span>
  <span class="token keyword">static</span> <span class="token keyword">constexpr</span> <span class="token keyword">auto</span> getter <span class="token operator">=</span> Getter<span class="token punctuation">;</span>
  <span class="token keyword">static</span> <span class="token keyword">constexpr</span> <span class="token keyword">auto</span> checker <span class="token operator">=</span> Checker<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">struct</span> <span class="token class-name">Helper</span> <span class="token punctuation">{</span>
  <span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">></span>
  <span class="token keyword">using</span> List <span class="token operator">=</span> <span class="token keyword">decltype</span><span class="token punctuation">(</span><span class="token class-name">T</span><span class="token double-colon punctuation">::</span><span class="token function">CollectField</span><span class="token punctuation">(</span>Rank<span class="token operator">&lt;</span>kMaxRank<span class="token operator">></span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">></span>
  <span class="token keyword">static</span> <span class="token keyword">inline</span> <span class="token keyword">constexpr</span> <span class="token keyword">auto</span> Size <span class="token operator">=</span> List<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token double-colon punctuation">::</span>size<span class="token punctuation">;</span>

  <span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">></span>
  <span class="token keyword">struct</span> <span class="token class-name">Extract</span><span class="token punctuation">;</span>

  <span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token keyword">class</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> Ts<span class="token operator">></span>
  <span class="token keyword">struct</span> <span class="token class-name">Extract</span><span class="token operator">&lt;</span>TypeList<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> Ts<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">>></span> <span class="token punctuation">{</span>
    <span class="token keyword">using</span> type <span class="token operator">=</span> T<span class="token punctuation">;</span>
    <span class="token keyword">using</span> remain <span class="token operator">=</span> TypeList<span class="token operator">&lt;</span>Ts<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">F</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">L</span> <span class="token operator">=</span> List<span class="token operator">&lt;</span>T<span class="token operator">>></span>
  <span class="token keyword">static</span> <span class="token keyword">inline</span> <span class="token keyword">void</span> <span class="token function">Iterate</span><span class="token punctuation">(</span>F <span class="token operator">&amp;&amp;</span>f<span class="token punctuation">,</span> T <span class="token operator">&amp;</span>a<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">f</span><span class="token punctuation">(</span>Extract<span class="token operator">&lt;</span>L<span class="token operator">></span><span class="token double-colon punctuation">::</span>type<span class="token double-colon punctuation">::</span>name<span class="token punctuation">,</span> a<span class="token punctuation">.</span><span class="token operator">*</span>Extract<span class="token operator">&lt;</span>L<span class="token operator">></span><span class="token double-colon punctuation">::</span>type<span class="token double-colon punctuation">::</span>getter<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span>
      <span class="token keyword">constexpr</span><span class="token punctuation">(</span>Extract<span class="token operator">&lt;</span>L<span class="token operator">></span><span class="token double-colon punctuation">::</span>remain<span class="token double-colon punctuation">::</span>size <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Iterate<span class="token operator">&lt;</span>F<span class="token punctuation">,</span> T<span class="token punctuation">,</span> <span class="token keyword">typename</span> <span class="token class-name">Extract</span><span class="token operator">&lt;</span>L<span class="token operator">></span><span class="token double-colon punctuation">::</span>remain<span class="token operator">></span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">forward</span><span class="token generic class-name"><span class="token operator">&lt;</span>F<span class="token operator">></span></span></span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">ADD_FIELD</span><span class="token expression"><span class="token punctuation">(</span>T<span class="token punctuation">,</span> name<span class="token punctuation">,</span> defaultValue<span class="token punctuation">,</span> checker<span class="token punctuation">)</span>                    </span><span class="token punctuation">\</span>
 <span class="token expression"><span class="token keyword">private</span><span class="token operator">:</span>                                                            </span><span class="token punctuation">\</span>
  <span class="token expression"><span class="token keyword">friend</span> <span class="token keyword">struct</span> <span class="token class-name">Helper</span><span class="token punctuation">;</span>                                              </span><span class="token punctuation">\</span>
  <span class="token expression">T name</span><span class="token punctuation">##</span><span class="token expression">_<span class="token punctuation">{</span>defaultValue<span class="token punctuation">}</span><span class="token punctuation">;</span>                                           </span><span class="token punctuation">\</span>
                                                                     <span class="token punctuation">\</span>
 <span class="token expression"><span class="token keyword">public</span><span class="token operator">:</span>                                                             </span><span class="token punctuation">\</span>
  <span class="token expression"><span class="token keyword">const</span> T <span class="token operator">&amp;</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> name</span><span class="token punctuation">##</span><span class="token expression">_<span class="token punctuation">;</span> <span class="token punctuation">}</span>                          </span><span class="token punctuation">\</span>
  <span class="token expression">T <span class="token operator">&amp;</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> name</span><span class="token punctuation">##</span><span class="token expression">_<span class="token punctuation">;</span> <span class="token punctuation">}</span>                                      </span><span class="token punctuation">\</span>
                                                                     <span class="token punctuation">\</span>
 <span class="token expression"><span class="token keyword">private</span><span class="token operator">:</span>                                                            </span><span class="token punctuation">\</span>
  <span class="token expression"><span class="token keyword">static</span> <span class="token keyword">inline</span> Append<span class="token operator">&lt;</span>                                              </span><span class="token punctuation">\</span>
      <span class="token expression"><span class="token keyword">decltype</span><span class="token punctuation">(</span><span class="token function">CollectField</span><span class="token punctuation">(</span>Rank<span class="token operator">&lt;</span>kMaxRank<span class="token operator">></span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                      </span><span class="token punctuation">\</span>
      <span class="token expression">TypeHelper<span class="token operator">&lt;</span><span class="token function">NameWrapper</span><span class="token punctuation">(</span>#name<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>Self<span class="token double-colon punctuation">::</span>name</span><span class="token punctuation">##</span><span class="token expression">_<span class="token punctuation">,</span> checker<span class="token operator">>></span><span class="token double-colon punctuation">::</span>type </span><span class="token punctuation">\</span>
  <span class="token expression"><span class="token function">CollectField</span><span class="token punctuation">(</span>Rank<span class="token operator">&lt;</span><span class="token keyword">decltype</span><span class="token punctuation">(</span><span class="token function">CollectField</span><span class="token punctuation">(</span>Rank<span class="token operator">&lt;</span>kMaxRank<span class="token operator">></span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token double-colon punctuation">::</span>size <span class="token operator">+</span> <span class="token number">1</span><span class="token operator">></span><span class="token punctuation">)</span></span></span>

<span class="token keyword">struct</span> <span class="token class-name">A</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">Base</span><span class="token operator">&lt;</span><span class="token class-name">A</span><span class="token operator">></span></span> <span class="token punctuation">{</span>
  <span class="token keyword">int</span> ok<span class="token punctuation">;</span>

  <span class="token function">ADD_FIELD</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> <span class="token number">110</span><span class="token punctuation">,</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">ADD_FIELD</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">,</span> b<span class="token punctuation">,</span> <span class="token number">1.2</span><span class="token punctuation">,</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">ADD_FIELD</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>string<span class="token punctuation">,</span> c<span class="token punctuation">,</span> <span class="token string">"OK"</span><span class="token punctuation">,</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">ADD_FIELD</span><span class="token punctuation">(</span><span class="token keyword">uint32_t</span><span class="token punctuation">,</span> d<span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">,</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  std<span class="token double-colon punctuation">::</span>string others<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> Helper<span class="token double-colon punctuation">::</span>Size<span class="token operator">&lt;</span>A<span class="token operator">></span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>

  A a<span class="token punctuation">;</span>
  <span class="token class-name">Helper</span><span class="token double-colon punctuation">::</span><span class="token function">Iterate</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>string_view name<span class="token punctuation">,</span> <span class="token keyword">auto</span> <span class="token operator">&amp;&amp;</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"name: "</span> <span class="token operator">&lt;&lt;</span> name <span class="token operator">&lt;&lt;</span> <span class="token string">", "</span><span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"value: "</span> <span class="token operator">&lt;&lt;</span> value <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/*
 * 4
 * name: a, value: 110
 * name: b, value: 1.2
 * name: c, value: OK
 * name: d, value: 27
 */</span>
</code></pre>
<h3 id="2.-序列化" tabindex="-1"><a href="#2.-%E5%BA%8F%E5%88%97%E5%8C%96">2. 序列化</a></h3>
<p>有了静态反射，序列化就变成了一项体力活了。这里参考了 <a href="https://github.com/eyalz800/zpp_bits">eyalz800/zpp_bits</a> 项目中的二进制序列化方式，同时使用 <a href="https://github.com/marzer/tomlplusplus">marzer/tomlplusplus</a> 也实现了一套序列化到 TOML 类型的逻辑。</p>
<h3 id="references" tabindex="-1"><a href="#references">References</a></h3>
<ol>
<li><a href="https://github.com/garbageslam/visit_struct">garbageslam/visit_struct</a></li>
<li><a href="https://github.com/eyalz800/zpp_bits">eyalz800/zpp_bits</a></li>
<li><a href="https://github.com/marzer/tomlplusplus">marzer/tomlplusplus</a></li>
</ol>

      </div>
      <script src="https://giscus.app/client.js"
      data-repo="SF-Zhou/sf-zhou.github.io"
      data-repo-id="MDEwOlJlcG9zaXRvcnk4MDc5ODgwNg=="
      data-category="Announcements"
      data-category-id="DIC_kwDOBNDkVs4CA6GQ"
      data-mapping="title"
      data-reactions-enabled="0"
      data-emit-metadata="0"
      data-input-position="bottom"
      data-theme="preferred_color_scheme"
      data-lang="en"
      crossorigin="anonymous"
      async>
    </script>
      <div class="footer">
        <div class="license">
          Except where otherwise noted, content on this site is licensed under a <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> license.
        </div>
        <div class="copyright">
          Copyright©2017 SF-Zhou, All Rights Reserved. Powered by <a href="https://pages.github.com/">GitHub Pages</a> and <a href="https://github.com/features/actions">GitHub Actions</a>.
        </div>
      </div>
    </div>
    <script src="/dist/main.js"></script>
    <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','https://www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-61723712-2', 'auto'); ga('send', 'pageview'); </script>
  </body>
</html>
